<!DOCTYPE html>
<html>
    <head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../style.css"/>
    <script src='../main.js'></script>
    <title>Listar Fornecedores</title>
</head>

<body>
    <div class="inicio">
        <li><a href="../index.html">PROJETO</a></li>
    </div>	

    <div id="div-reta"></div>

    <div class = "start">
        <div class = "listagem inicio">
            <div class = "escrito1"><b>LISTA DE FORNECEDORES</b></div>
            <div class="cadastrarf">
                <a id="button1" class="link1 icon-link icon-link-hover" href="./cadastrarFornecedores.html">
                    <b>CADASTRAR NOVO FORNECEDOR</b>
                     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                         <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                     </svg>
                </a>
            </div>

            <span id="tabela-fornecedores"></span>
            
            <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
                <script>
                    axios.get('http://localhost:3010/fornecedor').then(res => {
                    var tabela = '<table class="table tabela">';
                    tabela += '<thead class = "cabTabela">' +
                        "<tr>" +
                        "<th scope='col'>#</th>" +
                        "<th scope='col'>Raz√£o</th>" +
                        "<th scope='col'>CPF ou CNPJ</th>" +
                        "<th scope='col'>Contato</th>" +
                        "<th scope='col'>Logradouro</th>" +
                        "<th scope='col'>Cidade</th>" +
                        "<th scope='col'>UF</th>" +
                        "<th style='text-align: center' scope='col'>Perfil </th>" +
                        "</tr>" +
                        "</thead>" +
                        "<tbody class='table-group-divider'>";
                    var i = 0;
                    res.data.forEach(element => {
                        tabela += "<tr>";
                        tabela += `<th scope="row">${element.id_fornecedor}</th>`;
                        tabela += `<td>${element.razao}</td>`;
                        tabela += `<td>${element.cpf_cnpj}</td>`;
                        tabela += `<td>${element.contato}</td>`;
                        tabela += `<td>${element.logradouro}</td>`;
                        tabela += `<td>${element.cidade}</td>`;
                        tabela += `<td>${element.uf}</td>`;
                        tabela += `<td style='text-align: center' scope='col'><a href="perfilFornecedores.html?id_fornecedor=${element.id_fornecedor}" id="button3" list-group-item list-group-item-action active">Ver</a>` +
                                  `<a href="deletarFornecedores.html?id_fornecedor=${element.id_fornecedor}&delete="nao" id="button3" list-group-item list-group-item-action active">Delete</a>` +
                                  `<a href="updateFornecedores.html?id_fornecedor=${element.id_fornecedor}&razao=${element.razao}&cpf_cnpj=${element.cpf_cnpj}&contato=${element.contato}&logradouro=${element.logradouro}&cidade=${element.cidade}&uf=${element.uf}" id="button3" list-group-item list-group-item-action active">Alterar</a></td>`;
                        tabela += "</tr>";
                    });
                    tabela += "</tbody>";
                    tabela += "</table>";
                    document.getElementById('tabela-fornecedores').innerHTML = tabela;
                })
            </script>

        </div>
    </div>
</body>

</html>